<!DOCTYPE html>
<html lang="en">
    <head>
        <title>tree</title>
    </head>
	<!--Thanks to Marlen Julie, http://stackoverflow.com/users/4321140/marlen-julie for original canvas tree code-->
    <body onload="init();">
	    <div id="slider" style='float:left;'>
			<h4>Depth</h4>
			<form>
				<label>1</label>
				<input type="range" id="depth" value="5" min="1" max="10" step="1">
				<label>10</label>
			</form>
			<br>
	    </div>
		<div id="slider" style='float:left;'>
			<h4>Scaling</h4>
			<form>
				<label>0</label>
				<input type="range" id="scale" value="0.75" min="0" max="1" step="0.01">
				<label>1</label>
			</form>
			<br>
	    </div >
		<div id="slider" style='float:left;'>
			<h4>Angle</h4>
			<form>
				<label>0</label>
				<input type="range" id="angle" value="0.3" min="0" max="3.14" step="0.01">
				<label>1</label>
			</form>
			<br>
	    </div>
	    <div id="main" class="main">
			<canvas id="canvas" width="1200" height="600" ></canvas>
	    </div>
        <script type="text/javascript" >

            init = function() {
				var canvas = document.getElementById("canvas");
				canvas.width = window.innerWidth - 50; //document.width is obsolete
				canvas.height = window.innerHeight - 150; //document.height is obsolete
				canvasW = canvas.width;
				canvasH = canvas.height;
				var w = window,
					d = document,
					e = d.documentElement,
					g = d.getElementsByTagName('body')[0],
					x = w.innerWidth || e.clientWidth || g.clientWidth,
					y = w.innerHeight|| e.clientHeight|| g.clientHeight;				
                var x1 = canvasW/2;
                var y1 = canvasH-20;

                var x2 = canvasW/2;
                var y2 = canvasH-120;

                var angle = document.getElementById('angle').value;
                var depth = document.getElementById('depth').value;
				var scale = document.getElementById('scale').value;

                drawTree( x1, y1, x2, y2, angle, depth, scale );
				document.getElementById('depth').oninput = function() {
					depth = document.getElementById('depth').value;
					clearTree();
					drawTree( x1, y1, x2, y2, angle, depth, scale );
				};
				document.getElementById('angle').oninput = function() {
					angle = document.getElementById('angle').value;
					clearTree();
					drawTree( x1, y1, x2, y2, angle, depth, scale );
				};
				document.getElementById('scale').oninput = function() {
					scale = document.getElementById('scale').value;
					clearTree();
					drawTree( x1, y1, x2, y2, angle, depth, scale );
				};
            }
			clearTree = function () {
				var context = document.getElementById('canvas').getContext('2d');
				context.clearRect(0, 0, canvas.width, canvas.height);
			}
            drawTree = function( x1, y1, x2, y2, angle, depth, scale ){
                var context = document.getElementById('canvas').getContext('2d');

                context.strokeStyle = 'rgb( 0, 0, 0 )';
                context.lineWidth = depth;
                context.beginPath();
                context.moveTo( x1, y1 );
                context.lineTo( x2, y2 );
                context.stroke();

                if( depth > 0 ){
                    var x = x2 - x1;
                    var y = y2 - y1;

                    x *= scale;
                    y *= scale;

                    var xLeft = x * Math.cos( -angle ) - y * Math.sin( -angle );
                    var yLeft = x * Math.sin( -angle ) + y * Math.cos( -angle );

                    var xRight = x * Math.cos( +angle ) - y * Math.sin( +angle );
                    var yRight = x * Math.sin( +angle ) + y * Math.cos( +angle );

                    xLeft += x2;
                    yLeft += y2;

                    xRight += x2;
                    yRight += y2;

                    drawTree( x2, y2, xLeft, yLeft, angle, depth - 1, scale );
                    drawTree( x2, y2, xRight, yRight, angle, depth - 1, scale );
                }
            }

       </script>
    </body>
</html>